{"version":3,"sources":["com/fulcrologic/fulcro/react/version18.cljc"],"mappings":";;;AAQA;;;yDAAA,zDAAMA;AAAN,AAIK,IAAMC,YAAU,yBAAA,zBAACC;AAAjB,AAAA,kDAAA,oEACkB,WAAKE,QAAQC;AAAb,AACE,oBAAA,AAAAF,gBAAWF;AAAX;AAAA,AACE,AAACK,uBAAQL,UAAU,AAACM,gDAAsBF;;;AAC5C,AAAS,AAAAF,gBAAKF,kBAAUG;;AAH1B,OAAAD,gBAIGF;GALrB,uEAMkB,WAAKG,QAAQC;AAAb,AAAyB,OAACG,iDAAuBH,WAAWD;;;AAGnF;;;sDAAA,tDAAMK,oHAEHC;AAFH,AAGW,IAAMT,YAAU,yBAAA,zBAACC;AAAjB,6CACMQ,nBACF,2BAAA,mFAAA,oIAAA,lPAACC,2XAEC,WAAKP,QAAQC,xaAKf,OAACM;AALC,AACE,oBAAA,AAAAR,gBAAWF;AAAX;AAAA,AACE,AAACK,uBAAQL,UAAU,AAACM,gDAAsBF;;;AAC5C,AAAS,AAAAF,gBAAKF,kBAAUG;;AAH1B,OAAAD,gBAIGF;IACL,mFAAA,oIAAA,8IAEE,WAAKG,QAAQC;AAAb,AAAyB,OAACG,iDAAuBH,WAAWD","names":["com.fulcrologic.fulcro.react.version18/react18-options","reactRoot","cljs.core/volatile!","cljs.core/deref","ui-root","mount-node","cljs.core/vreset!","js/module$node_modules$react_dom$client.createRoot","js/module$node_modules$react_dom$client.hydrateRoot","com.fulcrologic.fulcro.react.version18/with-react18","app","cljs.core/assoc-in"],"sourcesContent":["(ns com.fulcrologic.fulcro.react.version18\n  #?@(:cljs\n      [(:require-macros com.fulcrologic.fulcro.react.version18)\n       (:require\n         [com.fulcrologic.fulcro.application]\n         [\"react-dom/client\" :as dom-client]\n         [\"react\" :as react])]))\n\n(defn react18-options\n  \"Returns the options that need to be passed to the Fulcro app constructor. See also `with-react18`.\"\n  []\n  #?(:cljs\n     (let [reactRoot (volatile! nil)]\n       {:render-root!  (fn [ui-root mount-node]\n                         (when-not @reactRoot\n                           (vreset! reactRoot (dom-client/createRoot mount-node)))\n                         (.render ^js @reactRoot ui-root)\n                         @reactRoot)\n        :hydrate-root! (fn [ui-root mount-node] (dom-client/hydrateRoot mount-node ui-root))})\n     :clj {}))\n\n(defn with-react18\n  \"Alters the rendering to support React 18\"\n  [app]\n  #?(:cljs (let [reactRoot (volatile! nil)]\n             (-> app\n               (assoc-in\n                 [:com.fulcrologic.fulcro.application/algorithms :com.fulcrologic.fulcro.algorithm/render-root!]\n                 (fn [ui-root mount-node]\n                   (when-not @reactRoot\n                     (vreset! reactRoot (dom-client/createRoot mount-node)))\n                   (.render ^js @reactRoot ui-root)\n                   @reactRoot))\n               (assoc-in\n                 [:com.fulcrologic.fulcro.application/algorithms :com.fulcrologic.fulcro.algorithm/hydrate-root!]\n                 (fn [ui-root mount-node] (dom-client/hydrateRoot mount-node ui-root)))))\n     :clj  app))\n"],"x_google_ignoreList":[0]}