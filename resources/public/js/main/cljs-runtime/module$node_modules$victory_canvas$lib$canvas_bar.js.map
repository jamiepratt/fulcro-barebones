{
"version":3,
"file":"module$node_modules$victory_canvas$lib$canvas_bar.js",
"lineCount":39,
"mappings":"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",
"sources":["node_modules/victory-canvas/lib/canvas-bar.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$victory_canvas$lib$canvas_bar\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CanvasBar = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _victoryBar = require(\"victory-bar\");\nvar _useCanvasContext = require(\"./hooks/use-canvas-context\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst evaluateProps = props => {\n  /**\n   * Potential evaluated props of following must be evaluated in this order:\n   * 1) `style`\n   * 2) `barWidth`\n   * 3) `cornerRadius`\n   */\n  const style = (0, _victoryBar.getStyle)(props.style, props);\n  const barWidth = (0, _victoryBar.getBarWidth)(props.barWidth, Object.assign({}, props, {\n    style\n  }));\n  const cornerRadius = (0, _victoryBar.getCornerRadius)(props.cornerRadius, Object.assign({}, props, {\n    style,\n    barWidth\n  }));\n  const modifiedProps = Object.assign({}, props, {\n    style,\n    barWidth,\n    cornerRadius\n  });\n  return modifiedProps;\n};\nconst usePreviousValue = value => {\n  const ref = _react.default.useRef();\n  _react.default.useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\nconst CanvasBar = props => {\n  const {\n    canvasRef\n  } = (0, _useCanvasContext.useCanvasContext)();\n  const modifiedProps = evaluateProps(props);\n  const {\n    polar,\n    style,\n    barWidth,\n    cornerRadius,\n    origin\n  } = modifiedProps;\n  const path2d = _react.default.useMemo(() => {\n    const p = polar ? (0, _victoryBar.getPolarBarPath)(modifiedProps, cornerRadius) : (0, _victoryBar.getBarPath)(modifiedProps, barWidth, cornerRadius);\n    return new Path2D(p);\n  }, [polar, barWidth, cornerRadius, modifiedProps]);\n  const previousPath = usePreviousValue(path2d);\n  const draw = _react.default.useCallback((ctx, path) => {\n    ctx.fillStyle = style.fill;\n    ctx.strokeStyle = style.stroke;\n    ctx.globalAlpha = style.fillOpacity;\n    ctx.lineWidth = style.strokeWidth;\n    if (polar) {\n      ctx.translate(origin?.x || 0, origin?.y || 0);\n    }\n    ctx.fill(path);\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n  }, [style, origin, polar]);\n\n  // This will clear the previous bar without clearing the entire canvas\n  const clearPreviousPath = _react.default.useCallback(ctx => {\n    if (previousPath) {\n      ctx.save();\n      // This ensures that the entire shape is erased\n      const strokeWidth = style.strokeWidth || 0;\n      ctx.lineWidth = strokeWidth + 2;\n      ctx.globalCompositeOperation = \"destination-out\";\n      draw(ctx, previousPath);\n      ctx.stroke(previousPath);\n      ctx.restore();\n    }\n  }, [draw, previousPath, style]);\n  _react.default.useEffect(() => {\n    const ctx = canvasRef.current?.getContext(\"2d\");\n    if (!ctx) return;\n    clearPreviousPath(ctx);\n    draw(ctx, path2d);\n  }, [canvasRef, draw, polar, barWidth, cornerRadius, modifiedProps, path2d, clearPreviousPath]);\n  return null;\n};\nexports.CanvasBar = CanvasBar;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","CanvasBar","_react","_interopRequireDefault","obj","__esModule","default","_victoryBar","_useCanvasContext","evaluateProps","props","style","getStyle","barWidth","getBarWidth","assign","cornerRadius","getCornerRadius","modifiedProps","usePreviousValue","ref","useRef","useEffect","current","canvasRef","useCanvasContext","polar","origin","path2d","useMemo","p","getPolarBarPath","getBarPath","Path2D","previousPath","draw","useCallback","ctx","path","fillStyle","fill","strokeStyle","stroke","globalAlpha","fillOpacity","lineWidth","strokeWidth","translate","x","y","setTransform","clearPreviousPath","save","globalCompositeOperation","restore","getContext"]
}
